<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>如何為 Blog 加入搜尋功能</title>
      <link href="/2023/11/19/search-plugin-make/"/>
      <url>/2023/11/19/search-plugin-make/</url>
      
        <content type="html"><![CDATA[<h1 id="Credit"><a href="#Credit" class="headerlink" title="Credit"></a>Credit</h1><blockquote><p>使用、參考的網路資源 :<br><a href="https://github.com/wzpan/hexo-generator-search">https://github.com/wzpan/hexo-generator-search</a><br><a href="https://liam.page/2017/09/21/local-search-engine-in-Hexo-site/">https://liam.page/2017/09/21/local-search-engine-in-Hexo-site/</a><br><a href="https://developer.mozilla.org/en-US/">https://developer.mozilla.org/en-US/</a></p></blockquote><p>對於提供資源的作者們，我由衷地表示感謝，如果資源的使用有任何不當之處，請來信告知我。<br>I sincerely express my gratitude to the authors who have provided resources. If there is any inappropriate use of the resources, please inform me by email.<br><strong>email</strong> : <a href="mailto:&#x74;&#x61;&#x6e;&#x69;&#x6d;&#x61;&#108;&#x31;&#x39;&#x31;&#50;&#64;&#103;&#109;&#97;&#105;&#x6c;&#46;&#x63;&#111;&#x6d;">&#x74;&#x61;&#x6e;&#x69;&#x6d;&#x61;&#108;&#x31;&#x39;&#x31;&#50;&#64;&#103;&#109;&#97;&#105;&#x6c;&#46;&#x63;&#111;&#x6d;</a></p><hr><h1 id="前言廢話"><a href="#前言廢話" class="headerlink" title="前言廢話"></a>前言廢話</h1><p>這應該算是這個網站的第一篇正式文章吧 (*´▽&#96;*)<br>做為一個前端初學者，要做站內搜尋還真不知從哪裡下手，所幸網路資源很多，我最後還是把這個功能做(拼裝)出來了。<br>因為我是程式菜雞，這篇文章的目的在於紀錄，不會講述很多細節，也可能會有錯誤，請見諒。</p><p>如果只想知道程式碼請到移駕到我的 <a href="https://github.com/Tanimal19/Blog-Plugin/tree/main">github</a><br>如果想確認這個搜尋功能長怎樣，請看右上角</p><hr><h1 id="HTML-的部分"><a href="#HTML-的部分" class="headerlink" title="HTML 的部分"></a>HTML 的部分</h1><p>一個基礎搜尋功能的架構應該會長這樣 :</p><ul><li><p><strong>可以輸入文字的搜尋框</strong> <code>search-input</code></p></li><li><p><strong>清除搜尋內容的按鈕</strong> <code>clear-btn</code></p></li><li><p><strong>搜尋按鈕</strong> <code>search-btn</code><br>  這個按鈕其實沒有搜尋功能，只是讓搜尋框出現而已</p></li><li><p><strong>包住所有元素的外殼</strong> <code>search-box</code><br>  整個搜尋功能我是打算做在 navbar 裡面，所以以上這些元素都會被包在 navbar 裡面</p></li><li><p><strong>搜尋結果</strong> <code>search-result</code><br>  搜尋結果其實也可以讓它出現在另一個新分頁，可以顯示更多搜尋結果，但這感覺很麻煩，所以我決定讓結果出現在 navbar 下面就好 (注意不是包在 navbar 裡面)</p></li></ul><p>程式碼 :</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navbar</span> <span class="attr">id</span>=<span class="string">&quot;navbar&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">id</span>=<span class="string">&quot;sub-nav&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;search-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;search-input&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hidden&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;Search&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;clear-btn&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hidden&quot;</span>&gt;</span></span><br><span class="line">          &lt;%- partial(&#x27;_icon/clear&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;search-btn&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-icon&quot;</span>&gt;</span></span><br><span class="line">      &lt;%- partial(&#x27;_icon/search&#x27;) %&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">navbar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;search-result&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="JavaScript-的部分"><a href="#JavaScript-的部分" class="headerlink" title="JavaScript 的部分"></a>JavaScript 的部分</h1><h2 id="搜尋功能"><a href="#搜尋功能" class="headerlink" title="搜尋功能"></a>搜尋功能</h2><p>搜尋功能裡最重要的就是搜尋功能 (?)</p><p>解釋一下原理 :<br>首先會用到 hexo 的一個插件 <a href="https://github.com/wzpan/hexo-generator-search">hexo-generator-search</a>，這個插件會幫你把所有的 post 做 index 然後產生一個 <code>search.xml</code>，接著我們就可以對這個 <code>search.xml</code> 來做搜尋藉此找到我們要的 post。</p><p>搜尋部分的程式碼是用<a href="https://liam.page/2017/09/21/local-search-engine-in-Hexo-site/">別人的程式碼</a>(因為我很爛)，再做一些小修改。<br>由於很長我就不把程式貼在這了，很醜。大致上就是在 <code>search.xml</code> 裡面找關鍵字，然後標記起來，並用 <code>li</code> 元素將每個結果包起來，最後回傳一個 <code>ul</code> 清單讓我們可以放在 <code>search-result</code> 裡面。</p><h2 id="按鈕功能"><a href="#按鈕功能" class="headerlink" title="按鈕功能"></a>按鈕功能</h2><p>接著是清除按鈕的功能，這部分其實是包含在搜尋功能的程式碼裡面，片段如下 :</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;#clear-btn&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#search-input&#x27;</span>).<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    $(<span class="string">&#x27;#search-result&#x27;</span>).<span class="title function_">html</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>然後是搜尋按鈕，上面章節有提到，這個按鈕其實沒有搜尋功能。因為在使用者輸入時我們就會直接輸出搜尋結果，不需要再多按一個搜尋按鈕，於是這個按鈕的功能就變成單單讓搜尋框出現和收起，也就是為它們加上或去除 <code>class = &quot;hidden&quot;</code>。<br>程式碼如下 :</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> searchButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;search-btn&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> clearButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;clear-btn&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> searchInput = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;search-input&quot;</span>);</span><br><span class="line"></span><br><span class="line">  searchButton.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    clearButton.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>);</span><br><span class="line">    searchInput.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>);</span><br><span class="line">    <span class="comment">// 順便把搜尋結果清掉</span></span><br><span class="line">    $(<span class="string">&#x27;#search-input&#x27;</span>).<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    $(<span class="string">&#x27;#search-result&#x27;</span>).<span class="title function_">html</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h1 id="CSS-部分"><a href="#CSS-部分" class="headerlink" title="CSS 部分"></a>CSS 部分</h1><p>對我個人而言，用起來要賞心悅目才爽，因此 CSS 是非常重要的；另一方面，也要用 css 才能讓搜尋框順利隱藏。<br>由於 css 的屬性很多，細節可以看 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS">MDN DOCS</a> 會更詳細，因此這部分只會提到幾個關鍵的屬性。</p><h2 id="搜尋結果"><a href="#搜尋結果" class="headerlink" title="搜尋結果"></a>搜尋結果</h2><p>搜尋結果會以 ul 清單的方式呈現，想讓每個結果以垂直並列的方式呈現可以使用 flex 布局 :</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">display</span>: flex</span><br><span class="line"><span class="attribute">flex-direction</span>: column</span><br></pre></td></tr></table></figure><p>然後，我不想讓這個清單無限伸長，我希望可以讓搜尋結果超出特定長度時可以出現滾動條，因此加上這兩個屬性 :</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow-y</span>: scroll</span><br><span class="line"><span class="attribute">overflow-x</span>: hidden</span><br></pre></td></tr></table></figure><p>同時，ul 和 li 元素都設有 <code>maxwidth</code> 來限制最大高度。</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>剩下的元素其實就是根據網站主題來更改 css 樣式，讓它不要顯得太突兀。<br>而所有元素都是採用 flex 布局，因為它可以自動幫我們調整寬高，我就不用做自適應了，好耶。</p>]]></content>
      
      
      <categories>
          
          <category> How To </category>
          
      </categories>
      
      
        <tags>
            
            <tag> guide </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TOC test</title>
      <link href="/2023/11/17/toc-test/"/>
      <url>/2023/11/17/toc-test/</url>
      
        <content type="html"><![CDATA[<h1 id="header-1-1"><a href="#header-1-1" class="headerlink" title="header 1.1"></a>header 1.1</h1><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.<br>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.</p><h2 id="header-2-1"><a href="#header-2-1" class="headerlink" title="header 2.1"></a>header 2.1</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.</p><h2 id="header-2-2"><a href="#header-2-2" class="headerlink" title="header 2.2"></a>header 2.2</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.</p><h1 id="header-1-2"><a href="#header-1-2" class="headerlink" title="header 1.2"></a>header 1.2</h1><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.</p><h3 id="header-3-1"><a href="#header-3-1" class="headerlink" title="header 3.1"></a>header 3.1</h3><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.</p><h1 id="header-1-3"><a href="#header-1-3" class="headerlink" title="header 1.3"></a>header 1.3</h1><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.</p><h2 id="header-2-1-1"><a href="#header-2-1-1" class="headerlink" title="header 2.1"></a>header 2.1</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.</p><h3 id="header-3-1-1"><a href="#header-3-1-1" class="headerlink" title="header 3.1"></a>header 3.1</h3><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.</p><h2 id="header-2-2-1"><a href="#header-2-2-1" class="headerlink" title="header 2.2"></a>header 2.2</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ut nisl a nisl scelerisque tempor nec et libero. Curabitur ut risus auctor neque volutpat porta. Curabitur vitae pretium tellus. Phasellus pulvinar ex justo, vitae luctus ipsum pharetra quis. Morbi ornare justo eu urna posuere porttitor. Fusce finibus vel odio sed convallis. Nulla vel eros blandit, molestie orci et, aliquam ligula. In pretium laoreet erat nec mattis. Proin porta pellentesque ante, eu gravida arcu vestibulum ut. Curabitur at mattis justo, ac vestibulum risus. Nulla laoreet et massa at euismod. Proin convallis rhoncus aliquam.</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
